<core:FragmentDefinition xmlns:mvc="sap.ui.core.mvc"
    xmlns="sap.m"
    xmlns:html="http://www.w3.org/1999/xhtml"
    xmlns:l="sap.ui.layout"
    xmlns:core="sap.ui.core"
    xmlns:app="http://schemas.sap.com/sapui5/extension/sap.ui.core.CustomData/1"
    xmlns:zTipoLibrary="custZtipo.zTipoLibrary.controls"
    height="100%">
    <Panel>
        <l:Grid defaultSpan="XL12 L12 M12 S12" vSpacing="0.1">
            <VBox>
                <Label text="Esercizio di Gestione:" required="true" />
                <ComboBox id="es_gestione" width="100%" items="{path: 'wizardEntitiesModel>/ZgjahrEngNiSet', sorter: { path: 'ZgjahrEng' }}"
                    selectionChange="esGestioneSelectionChange" selectedKey="{preimpostazioneModel>/ZgjahrEng}">                
                    <core:Item key="{wizardEntitiesModel>ZgjahrEng}" text="{wizardEntitiesModel>ZgjahrEng}"/>
                </ComboBox>
                <layoutData>
                    <l:GridData span="XL3 L3 M6 S12" />
                </layoutData>
            </VBox>
             <VBox>
                <Label text="Mese:" required="true" />
                <ComboBox id="mese" width="50%" items="{path: 'wizardEntitiesModel>/ZmeseSet'}" selectionChange="meseSelectionChange" selectedKey="{preimpostazioneModel>/meseValore}">
                    <core:Item key="{wizardEntitiesModel>Valore}" text="{wizardEntitiesModel>Descrizione}"/>
                </ComboBox>
                <layoutData>
                    <l:GridData span="XL3 L3 M6 S12" />
                </layoutData>
            </VBox>
            <VBox>
                <Label text="Sottotipologia primo livello:" />
                <!-- <Input value="{preimpostazioneModel>/tipologiaDescrizione}" id="tipologia" width="100%" showSuggestion="false" showValueHelp="true" showClearIcon="true"
                    valueHelpRequest="handleValueHelpZhfTipo" 
                    suggestionItems="{path: 'wizardEntitiesModel>/ZhfTipo', sorter: { path: 'ZcodTipo' }}" 
                    app:fieldName="tipologia" 
                    app:filterTableField="tipologia"
                    valueHelpOnly="true"
                    liveChange="ZhfTipoOnDelete">
                    <suggestionItems>
                        <core:ListItem key="{wizardEntitiesModel>ZcodTipo}" text="{wizardEntitiesModel>Ztipo}"/>
                    </suggestionItems>
                </Input> -->

                <zTipoLibrary:InputZTipo  
                  bukrs="S001"
                  value="{preimpostazioneModel>/tipologiaDescrizione}" 
                  key="{preimpostazioneModel>/tipologia}">                
                </zTipoLibrary:InputZTipo>    


                <layoutData>
                    <l:GridData span="XL3 L3 M6 S12" linebreak="true"/>
                </layoutData>
            </VBox>
            <VBox>
                <Label text="Sottotipologia secondo livello:" />
                <!-- <ComboBox id="sottotipologia" width="100%" selectionChange="sottotipologiaSelectionChange"
                    items ="{
                    path: 'wizardEntitiesModel>/ZhfSottotipo'
                    }">
                    <core:ListItem key="{wizardEntitiesModel>ZhfSottotipo}" text="{wizardEntitiesModel>Zsottotipo}" additionalText = "{wizardEntitiesModel>ZcodSottotipo}"/>                                                    
                </ComboBox> -->

                <zTipoLibrary:InputZSottotipo  
                  bukrs="S001"
                  zcodTipo="{preimpostazioneModel>/tipologia}"
                  ztipo="{preimpostazioneModel>/tipologiaDescrizione}"
                  value="{preimpostazioneModel>/sottotipolgiaDescrizione}" 
                  key="{preimpostazioneModel>/sottotipolgia}">                
                </zTipoLibrary:InputZSottotipo> 


                <layoutData>
                    <l:GridData span="XL3 L3 M6 S12" />
                </layoutData>
            </VBox>
            <VBox>
                <Label text="Competenza/Residui:" />
                <ComboBox id="competenza" width="100%" items="{path: 'wizardEntitiesModel>/ZcompResNISet', sorter: { path: 'Descrizione' }}" selectedKey="{preimpostazioneModel>/competenza}" >
                    <core:Item key="{wizardEntitiesModel>ZcompRes}" text="{wizardEntitiesModel>Descrizione}"/>
                </ComboBox>
                <layoutData>
                    <l:GridData span="XL3 L3 M6 S12" />
                </layoutData>
            </VBox> 
            <ToolbarSpacer />
            <Button type="Emphasized" text="{i18n>submit}" press="onSearch" id="buttonSubmit" >
                <layoutData>
                    <l:GridData indent="XL9 L9 M6" span="XL3 L3 M6 S12" linebreak="true"/>
                </layoutData>
            </Button>
            <core:Fragment fragmentName="project1.fragment.wizardPreimpostazione.tableWizard" type="XML" />     
        </l:Grid>
    </Panel>
</core:FragmentDefinition>